

{% extends './plantilla.html' %}
{% load static %}
{% block contenido %}

<style>
@media print {
    body * {
        visibility: hidden;
    }
    #tabla-imprimir, #tabla-imprimir * {
        visibility: visible;
    }
    #tabla-imprimir {
        position: absolute;
        left: 0;
        top: 0;
    }

    /* Ocultar la columna de acciones */
    .col-acciones, .col-acciones * {
        display: none !important;
    }
}
</style>


<h1>Lista de Evento</h1>

<a href="{% url 'exportar_eventos_pdf' %}" class="btn btn-custom">
    üìÑ Exportar PDF
</a>

<a href="{% url 'exportar_eventos_excel' %}" class="btn btn-custom" target="_blank">
    üìä Exportar a Excel
</a>
<button onclick="window.print()" class="btn btn-custom">
    üñ®Ô∏è Imprimir Lista
</button>

<br>
<a href ="/nuevoEvento" class="btn btn-primary ">Nuevo Evento</a>


<br>
<div id="tabla-imprimir">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Descripci√≥n</th>
                <th>Fecha de inicio</th>
                <th>Fecha Fin</th>
                <th>Cupos</th>
                <th>Modalidad</th>
                <th>Organizador</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for evento in eventos %}
            <tr>
                <td>{{ evento.id }}</td>
                <td>{{ evento.nombre }}</td>
                <td>{{ evento.descripcion }}</td>
                <td>{{ evento.fecha_inicio }}</td>
                <td>{{ evento.fecha_fin }}</td>
                <td>{{ evento.cupos }}</td>
                <td>{{ evento.modalidad }}</td>
                <td>{{ evento.organizador }}</td>
                <td>
                    <a href="editarEvento/{{ evento.id }}" class="btn btn-outline-warning">
                        <i class ="fa fa-pen"> </i>
                    </a>
                    <a href="#"
                    onclick = "eliminarEvento('{{ evento.id }}');"

                    class="btn btn-outline-danger">
                        <i class ="fa fa-trash"> </i>
                    </a>
                </td>
            </tr>
            {% endfor %}
                    <script>
                //Swal.fire("SweetAlert2 is working!");
                function eliminarEvento(id){
                    Swal.fire({
                        title: "CONFIRMACION",
                        text: "¬ø ESTAS SEGURO DE ELIMINAR EL EVENTO DE FORMA PERMANENTE",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Si, Deseo Eliminar!"
                        }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href="/eliminarEvento/"+id
                        }
                    });

                }
                
                        
            </script>
            <script>
                let table = new DataTable('#tbl_cargos', {
                    language: {
                        "decimal": "",
                        "emptyTable": "No hay datos disponibles en la tabla",
                        "info": "Mostrando _START_ a _END_ de _TOTAL_ entradas",
                        "infoEmpty": "Mostrando 0 a 0 de 0 entradas",
                        "infoFiltered": "(filtrado de _MAX_ entradas totales)",
                        "infoPostFix": "",
                        "thousands": ",",
                        "lengthMenu": "Mostrar _MENU_ entradas",
                        "loadingRecords": "Cargando...",
                        "processing": "Procesando...",
                        "search": "Buscar:",
                        "zeroRecords": "No se encontraron registros coincidentes",
                        "paginate": {
                            "first": "Primero",
                            "last": "√öltimo",
                            "next": "Siguiente",
                            "previous": "Anterior"
                        },
                        "aria": {
                            "sortAscending": ": activar para ordenar columna ascendente",
                            "sortDescending": ": activar para ordenar columna descendente"
                        }
                    }
                });
            </script>
        </tbody>
    </table>
</div>
{% endblock %}


